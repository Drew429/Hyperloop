
#Air Bearings
despmtr bearing_height .3
despmtr bearing_sweep_angle 20
despmtr bearing_length 5
despmtr bearing_spacing .5
despmtr n_bearings 4
despmtr bearing_rotation 45

#pod 
despmtr r_pod 1
despmtr r_tube 4

###########################################################################################
# Air Bearings
###########################################################################################

#skid 1
patbeg i n_bearings

    set r_top r_pod
    set r_bottom 3*r_pod

    set alpha bearing_sweep_angle #arc size
    set theta (180-alpha)/2 #outside angle
    skbeg r_top*cosd(360-theta) r_top*sind(360-theta) 0 
        cirarc r_top*cosd(270) r_top*sind(270) 0 r_top*cosd(180+theta) r_top*sind(180+theta) 0
        linseg r_bottom*cosd(180+theta) r_bottom*sind(180+theta) 0
        cirarc r_bottom*cosd(270) r_bottom*sind(270) 0 r_bottom*cosd(360-theta) r_bottom*sind(360-theta) 0
        linseg r_top*cosd(360-theta) r_top*sind(360-theta) 0 
    skend
    extrude 0 0 bearing_length

    skbeg 0 r_tube 0
        cirarc -r_tube 0 0  0 -r_tube 0
        cirarc r_tube 0 0  0 r_tube 0
    skend
    translate 0 r_tube-r_top-bearing_height 0
    extrude 0 0 bearing_length

    intersect
    rotatez bearing_rotation 0 0 

    translate 0 0 i*(bearing_length+bearing_spacing)
patend

#skid 2
patbeg i n_bearings

    set r_top r_pod
    set r_bottom 3*r_pod

    set alpha bearing_sweep_angle #arc size
    set theta (180-alpha)/2 #outside angle
    skbeg r_top*cosd(360-theta) r_top*sind(360-theta) 0 
        cirarc r_top*cosd(270) r_top*sind(270) 0 r_top*cosd(180+theta) r_top*sind(180+theta) 0
        linseg r_bottom*cosd(180+theta) r_bottom*sind(180+theta) 0
        cirarc r_bottom*cosd(270) r_bottom*sind(270) 0 r_bottom*cosd(360-theta) r_bottom*sind(360-theta) 0
        linseg r_top*cosd(360-theta) r_top*sind(360-theta) 0 
    skend
    extrude 0 0 bearing_length

    skbeg 0 r_tube 0
        cirarc -r_tube 0 0  0 -r_tube 0
        cirarc r_tube 0 0  0 r_tube 0
    skend
    translate 0 r_tube-r_top-bearing_height 0
    extrude 0 0 bearing_length

    intersect
    rotatez -bearing_rotation 0 0

    translate 0 0 i*(bearing_length+bearing_spacing)
patend